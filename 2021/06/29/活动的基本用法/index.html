<!DOCTYPE html><html lang="zh-CN" class="loading"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><title>活动的基本用法 - 黄子涵</title><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="google" content="notranslate"><meta name="keywords" content="黄子涵,"><meta name="description" content="活动的基本用法
由于Android Studio在一个工作区间内只允许打开一个项目，所以我们需要将当前的项目关闭，点击导航栏File——&amp;gt;Close Project。然后再新建一个Androi,"><meta name="author" content="黄子涵"><link rel="alternative" href="atom.xml" title="黄子涵" type="application/atom+xml"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="/css/diaspora.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css"><meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism-atom-dark.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"><script src="/js/prism.js"></script>
<script src="/js/prism-line-numbers.min.js"></script></head><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><body class="loading"><span id="config-title" style="display:none">黄子涵</span><div id="loader"></div><div id="single"><div id="top" style="display:block"><div class="bar" style="width:0"></div><a class="iconfont icon-home image-icon" href="javascript:;" data-url="http://www.huangzihan.top"></a><div title="播放/暂停" class="iconfont icon-play"></div><h3 class="subtitle">活动的基本用法</h3><div class="social"><div><div class="share"><a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a></div><div id="qr"></div></div></div><div class="scrollbar"></div></div><div class="section"><div class="article"><div class="main"><h1 class="title">活动的基本用法</h1><div class="stuff"><span>六月 29, 2021</span></div><div class="content markdown"><h1 id="活动的基本用法"><a href="#活动的基本用法" class="headerlink" title="活动的基本用法"></a>活动的基本用法</h1><blockquote><p>由于Android Studio在一个工作区间内只允许打开一个项目，所以我们需要将当前的项目关闭，点击导航栏File——&gt;Close Project。然后再新建一个Android项目，项目名可以叫作Huangzihan， 包名我们就使用默认值com.example.huangzihan。新建项目的步骤我们已经学习过了，我们选择Add No Activity，因为这次我们准备手动创建活动，如图（选择不添加活动）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/选择不添加活动.png" width="90%" height="90%"> 选择不添加活动</center><blockquote><p>点击Finish，等待Gradle构建完成后，项目就创建成功了。</p></blockquote><h2 id="手动创建活动"><a href="#手动创建活动" class="headerlink" title="手动创建活动"></a>手动创建活动</h2><h3 id="初始项目结构"><a href="#初始项目结构" class="headerlink" title="初始项目结构"></a>初始项目结构</h3><blockquote><p>项目创建成功后，仍然会默认使用Android模式的项目结构，这里我们手动改成Project模式。目前Huangzihan项目中虽然还是会自 动生成很多文件，但是app/src/main/java/com.example.huangzihan目录应该是空的了，如图（初始项目结构）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/初始项目结构.png" width="50%" height="50%"> 初始项目结构</center><span id="more"></span><h3 id="新建活动对话框"><a href="#新建活动对话框" class="headerlink" title="新建活动对话框"></a>新建活动对话框</h3><blockquote><p>现在右击com.example.huangzihan包—&gt;New—&gt;Activity——&gt;Empty Activity，会弹出一个创建活动的对话框，我们将类命名为First Activity，并且不要勾选Generate LayoutFile和Launcher Activity这两个选项，如图（新建活动对话框）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/新建活动对话框.png" width="90%" height="90%"> 新建活动对话框</center><h4 id="勾选Generate-Layout-File"><a href="#勾选Generate-Layout-File" class="headerlink" title="勾选Generate Layout File"></a>勾选Generate Layout File</h4><blockquote><p>勾选Generate Layout File表示会自动为FirstActivity创建一个对应的布局文件</p></blockquote><h4 id="勾选Launcher-Activity"><a href="#勾选Launcher-Activity" class="headerlink" title="勾选Launcher Activity"></a>勾选Launcher Activity</h4><blockquote><p>勾选Launcher Activity表示会自动将FirstActivity设置为当前项目的主活动，这里由于第一次手动创建活动，这些自动生成的东西暂时都不要勾选。</p></blockquote><h4 id="勾选Backwards-Compatibility"><a href="#勾选Backwards-Compatibility" class="headerlink" title="勾选Backwards Compatibility"></a>勾选Backwards Compatibility</h4><blockquote><p>勾选Backwards Compatibility表示会为项目启用向下兼容的模式，这个选项要勾上。</p><p>点击Finish完成创建。你需要知道，项目中的任何活动都应该重写Activity的<code>onCreate()</code>方法，而目前我们的FirstActivity中已经重写了这个方法，这是由Android Studio自动帮我们完成的，代码如下所示：</p></blockquote><pre class="line-numbers language-C/C++" data-language="C/C++"><code class="language-C/C++">package com.example.huangzihan;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;

public class FirstActivity extends AppCompatActivity 
&#123;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    &#123;
        
        super.onCreate(savedInstanceState);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>可以看到，<code>onCreate()</code>方法非常简单，就是调用了父类的<code>onCreat()</code>方法。当然这只是默认的实现，后面还需要在里面加入很多自己的逻辑。</p></blockquote><h2 id="创建和加载布局"><a href="#创建和加载布局" class="headerlink" title="创建和加载布局"></a>创建和加载布局</h2><h3 id="新建布局资源文件"><a href="#新建布局资源文件" class="headerlink" title="新建布局资源文件"></a>新建布局资源文件</h3><blockquote><p>前面我们说过，Android程序的设计讲究逻辑和视图分离，最好每一个活动都能对应一个布局，布局就是用来显示界面内容的，因此我们现在就来手动创建一个布局文件。</p><p>右击app/src/main/res目录—&gt;New——&gt;Directory，会弹出一个新建目录的窗口，这里先创建一个名为layout的目录。然后对着layout目录右键——&gt;Layout resource<br>file，又会弹出一个新建布局资源文件的窗口，我们将这个布局文件命名为first_layout，根元素就默认选择为LinearLayout，如图（新建布局资源文件）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/新建布局资源文件.png" width="50%" height="50%"> 新建布局资源文件</center><h3 id="布局编辑器"><a href="#布局编辑器" class="headerlink" title="布局编辑器"></a>布局编辑器</h3><blockquote><p>点击OK完成布局的创建，这时候你会看到如图（布局编辑器）所示的布局编辑器。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/布局编辑器.png" width="100%" height="100%"> 布局编辑器</center><blockquote><p>这是Android Studio为我们提供的可视化布局编辑器，你可以在屏幕的中央区域预览当前的布局。在窗口的最下方有两个切换卡，左边是Design，右边是Text。Design是当前的可视化布局编辑器，在这里你不仅可以预览当前的布局，还可以通过拖放的方式编辑布局。而Text则是通过XML文件的方式来编辑布局的，现在点击一下Text切换卡，可以看到如下代码：</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/布局编辑器程序示例.png" width="100%" height="100%"> 布局编辑器程序示例</center><h3 id="添加Button元素"><a href="#添加Button元素" class="headerlink" title="添加Button元素"></a>添加Button元素</h3><blockquote><p>由于我们刚才在创建布局文件时选择了LinearLayout作为根元素，因此现在布局文件中已经有一个LinearLayout元素了。那我们现在对这个布局稍做编辑，添加一个按钮，如下所示：</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/添加Button元素程序示例.png" width="100%" height="100%"> 添加Button元素程序示例</center><h4 id="android-id"><a href="#android-id" class="headerlink" title="android:id"></a>android:id</h4><blockquote><p><strong>android:id</strong>是给当前的元素定义一个唯一标识符，之后可以在代码中对这个元素进行操作。</p></blockquote><h4 id="id-button"><a href="#id-button" class="headerlink" title="@+id/button"></a>@+id/button</h4><blockquote><p>你可能会对<code>@+id/button</code>这种语法感到陌生，但如果把加号去掉，变成<code>@id/button</code>，这样你就会觉得有些熟悉了吧，这不就是在XML中引用资源的语法吗？只不过是把<strong>string</strong>替换成了<strong>id</strong>。是的，如果你需要在XML中引用一个<strong>id</strong>，就使用<code>@id/id_name</code>这种语法，而如果你需要在XML中定义一个<strong>id</strong>，则要使用<code>@+id/id_name</code>这种语法。</p></blockquote><h4 id="android-layout-width"><a href="#android-layout-width" class="headerlink" title="android:layout_width"></a>android:layout_width</h4><blockquote><p>随后<strong>android:layout_width</strong>指定了当前元素的宽度，这里使用<strong>match_parent</strong>表示让当前元素和父元素一样宽。</p></blockquote><h4 id="android-layout-height"><a href="#android-layout-height" class="headerlink" title="android:layout_height"></a>android:layout_height</h4><blockquote><p><strong>android:layout_height</strong>指定了当前元素的高度，这里使用<strong>wrap_content</strong>表示当前元素的高度只要能刚好包含里面的内容就行。</p></blockquote><h4 id="android-text"><a href="#android-text" class="headerlink" title="android:text"></a>android:text</h4><blockquote><p><strong>android:text</strong>指定了元素中显示的文字内容。</p></blockquote><h3 id="预览当前布局"><a href="#预览当前布局" class="headerlink" title="预览当前布局"></a>预览当前布局</h3><blockquote><p>按钮已经添加完了，可以通过右侧工具栏的Preview来预览一下当前布局，如图（预览当前布局）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/预览当前布局.png" width="90%" height="90%"> 预览当前布局</center><h3 id="在活动中加载布局"><a href="#在活动中加载布局" class="headerlink" title="在活动中加载布局"></a>在活动中加载布局</h3><blockquote><p>可以看到，按钮已经成功显示出来了，这样一个简单的布局就编写完成了。那么接下来我们要做的，就是在活动中加载这个布局。</p><p>重新回到FirstActivity，在<code>onCreate()</code>方法中加入如下代码:</p></blockquote><pre class="line-numbers language-C/C++" data-language="C/C++"><code class="language-C/C++">package com.example.huangzihan;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;

public class FirstActivity extends AppCompatActivity 
&#123;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    &#123;

        super.onCreate(savedInstanceState);
        setContentView(R.layout.first_layout);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>可以看到，这里调用了<strong>setContentView</strong>()方法来给当前的活动加载一个布局，而在<strong>setContentView</strong>()方法中，我们一般都会传入一个布局文件的<strong>id</strong>。项目中添加的任何资源都会在<strong>R</strong>文件中生成一个相应的资源<strong>id</strong>，因此我们刚才创建的<strong>first_layout.xml</strong>布局的<strong>id</strong>现在应该是已经添加到<strong>R</strong>文件中了。在代码中去引用布局文件的方法你也已经学过了，只需要调用<strong>R.layout.first_layout</strong>就可以得到<strong>first_layout.xml</strong>布局的<strong>id</strong>，然后将这个值传入<strong>setContentView</strong>()方法即可。</p></blockquote><h2 id="在AndroidManifest文件中注册"><a href="#在AndroidManifest文件中注册" class="headerlink" title="在AndroidManifest文件中注册"></a>在AndroidManifest文件中注册</h2><blockquote><p>所有的活动都要在AndroidManifest.xml中进行注册才能生效，而实际上First Activity已经在AndroidManifest.xml中注册过了，我们打开app/src/main/Android-Manifest.xml文件瞧一瞧，代码如下所示：</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/在AndroidManifest文件中注册程序示例一.png" width="90%" height="90%"> 在AndroidManifest文件中注册程序示例一</center><h3 id="lt-activity-gt-标签"><a href="#lt-activity-gt-标签" class="headerlink" title="&lt;activity&gt;标签"></a><code>&lt;activity&gt;</code>标签</h3><blockquote><p>可以看到，活动的注册声明要放在<application>标签内，这里是通过<activity>标签来对活动进行注册的。那么又是谁帮我们自动完成了对FirstActivity的注册呢？当然是Android Studio，之前在使用Eclipse创建活动或其他系统组件时，很多人都会忘记要去Android Manifest.xml中注册一下，从而导致程序运行崩溃，很显然Android Studio在这方面做得更加人性化。</activity></application></p></blockquote><h3 id="FirstActivity"><a href="#FirstActivity" class="headerlink" title=".FirstActivity"></a><code>.FirstActivity</code></h3><blockquote><p>在<code>&lt;activity&gt;</code>标签中我们使用了<strong>android:name</strong>来指定具体注册哪一个活动，那么这里填入的<code>.FirstActivity</code>是什么意思呢？其实这不过就是<strong>com.example.activitytest.FirstActivity</strong>的缩写而已。</p></blockquote><h3 id="lt-manifest-gt-标签"><a href="#lt-manifest-gt-标签" class="headerlink" title="&lt;manifest&gt;标签"></a><code>&lt;manifest&gt;</code>标签</h3><blockquote><p>由于在最外层的<code>&lt;manifest&gt;</code>标签中已经通过<strong>package</strong>属性指定了程序的包名是<strong>com.example.activitytest</strong>，因此在注册活动时这一部分就可以省略了，直接使用<code>.FirstActivity</code>就足够了。不过，仅仅是这样注册了活动，我们的程序仍然是不能运行的，因为还没有为程序配置主活动，也就是说，当程序运行起来的时候，不知道要首先启动哪个活动。配置主活动的方法其实就是在<code>&lt;activity&gt;</code>标签的内部加入<code>&lt;intent-filter&gt;</code>标签，并在这个标签里添加<code>&lt;action android:name=&quot;android.intent.action.MAIN&quot;/&gt;</code>和<code>&lt;category android: name=&quot;android.intent.category.LAUNCHER&quot; /&gt;</code>这两句声明即可。</p></blockquote><h3 id="android-label"><a href="#android-label" class="headerlink" title="android:label"></a>android:label</h3><blockquote><p>除此之外，我们还可以使用<strong>android:label</strong>指定活动中标题栏的内容，标题栏是显示在活动最顶部的，待会儿运行的时候你就会看到。需要注意的是，给主活动指定的label不仅会成为标题栏中的内容，还会成为启动器（Launcher）中应用程序显示的名称。</p><p>修改后的AndroidManifest.xml文件，代码如下所示：</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/在AndroidManifest文件中注册程序示例二.png" width="90%" height="90%"> 在AndroidManifest文件中注册程序示例二</center><h3 id="活动的首次运行结果"><a href="#活动的首次运行结果" class="headerlink" title="活动的首次运行结果"></a>活动的首次运行结果</h3><blockquote><p>这样的话，FirstActivity就成为我们这个程序的主活动了，即点击桌面应用程序图标时首先打开的就是这个活动。另外需要注意，如果你的应用程序中没有声明任何一个活动作为主活动，这个程序仍然是可以正常安装的，只是你无法在启动器中看到或者打开这个程序。这种程序一般都是作为第三方服务供其他应用在内部进行调用的，如支付宝快捷支付服务。好了，现在一切都已准备就绪，让我们来运行一下程序吧，结果如图（首次运行结果）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/首次运行结果.jpg" width="40%" height="40%"> 首次运行结果</center><blockquote><p>在界面的最顶部是一个标题栏，里面显示着我们刚才在注册活动时指定的内容。标题栏的下面就是在布局文件first_layout.xml中编写的界面，可以看到我们刚刚定义的按钮。现在你已经成功掌握了手动创建活动的方法，下面让我们继续看一看你在活动中还能做哪些事情吧。</p></blockquote><h2 id="在活动中使用Toast"><a href="#在活动中使用Toast" class="headerlink" title="在活动中使用Toast"></a>在活动中使用Toast</h2><blockquote><p>Toast是Android系统提供的一种非常好的提醒方式，在程序中可以使用它将一些短小的信息通知给用户，这些信息会在一段时间后自动消失，并且不会占用任何屏幕空间，我们现在就尝试一下如何在活动中使用Toast。</p><p>首先需要定义一个弹出Toast的触发点，正好界面上有个按钮，那我们就让点击这个按钮的时候弹出一个Toast吧。在<code>onCreate()</code>方法中添加如下代码：</p></blockquote><pre class="line-numbers language-C/C++" data-language="C/C++"><code class="language-C/C++">package com.example.huangzihan;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class FirstActivity extends AppCompatActivity
&#123;
    @Override
    protected void onCreate(Bundle savedInstanceState)
    &#123;

        super.onCreate(savedInstanceState);
        setContentView(R.layout.first_layout);
        Button button1&#x3D;(Button) findViewById(R.id.黄子涵的按钮);
        button1.setOnClickListener(new View.OnClickListener()
        &#123;
            @Override
            public void onClick(View v)
            &#123;
                Toast.makeText(FirstActivity.this, &quot;你点击了黄子涵的按钮&quot;, Toast.LENGTH_SHORT).show();
            &#125;
        &#125;);
    &#125;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>在活动中，可以通过<code>findViewById()</code>方法获取到在布局文件中定义的元素，这里我们传入<strong>R.id.黄子涵的按钮</strong>，来得到按钮的实例，这个值是刚才在first_layout.xml中通过<strong>android:id</strong>属性指定的。<code>findViewById()</code>方法返回的是一个View对象，我们需要向下转型将它转成Button对象。得到按钮的实例之后，我们通过调用<code>setOnClickListener()</code>方法为按钮注册一个监听器，点击按钮时就会执行监听器中的<code>onClick()</code>方法。因此，弹出Toast的功能当然是要在<code>onClick()</code>方法中编写了。</p></blockquote><h3 id="Toast的用法"><a href="#Toast的用法" class="headerlink" title="Toast的用法"></a>Toast的用法</h3><blockquote><p>Toast的用法非常简单，通过静态方法<code>makeText()</code>创建出一个Toast对象，然后调用<code>show()</code>将Toast显示出来就可以了。</p></blockquote><h3 id="makeText-方法的3个参数"><a href="#makeText-方法的3个参数" class="headerlink" title="makeText()方法的3个参数"></a><code>makeText()</code>方法的3个参数</h3><blockquote><p><code>makeText()</code>方法需要传入3个参数。第一个参数是<strong>Context</strong>，也就是Toast要求的上下文，由于活动本身就是一个<strong>Context</strong>对象，因此这里直接传入<strong>FirstActivity.this</strong>即可。第二个参数是Toast显示的文本内容，第三个参数是Toast显示的时长，有两个内置常量可以选择<strong>Toast.LENGTH_SHORT</strong>和<strong>Toast.LENGTH_LONG</strong>。</p></blockquote><h3 id="Toast运行效果"><a href="#Toast运行效果" class="headerlink" title="Toast运行效果"></a>Toast运行效果</h3><blockquote><p>现在重新运行程序，并点击一下按钮，效果如图（Toast运行效果）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/Toast运行效果.jpg" width="40%" height="40%"> Toast运行效果</center><h2 id="在活动中使用Menu"><a href="#在活动中使用Menu" class="headerlink" title="在活动中使用Menu"></a>在活动中使用Menu</h2><blockquote><p>手机毕竟和电脑不同，它的屏幕空间非常有限，因此充分地利用屏幕空间在手机界面设计中就显得非常重要了。如果你的活动中有大量的菜单需要显示，这个时候界面设计就会比较尴尬，因为仅这些菜单就可能占用屏幕将近三分之一的空间，这该怎么办呢？不用担心，Android给我们提供了一种方式，可以让菜单都能得到展示的同时，还能不占用任何屏幕空间。</p></blockquote><h3 id="新建Menu资源文件"><a href="#新建Menu资源文件" class="headerlink" title="新建Menu资源文件"></a>新建Menu资源文件</h3><blockquote><p>首先在res目录下新建一个menu文件夹，右击res目录——&gt;New——&gt;Directory，输入文件夹名menu，点击OK。接着在这个文件夹下再新建一个名叫main的菜单文件，右击menu文件夹——&gt;New——&gt;Menu resource file，如图（新建Menu资源文件）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/新建Menu资源文件.png" width="50%" height="50%"> 新建Menu资源文件</center><blockquote><p>文件名输入main，点击OK完成创建。然后在main.xml中添加如下代码：</p></blockquote><pre class="line-numbers language-C/C++" data-language="C/C++"><code class="language-C/C++">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;
&lt;menu xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;&gt;
    &lt;item
        android:id&#x3D;&quot;@+id&#x2F;add_item&quot;
        android:title&#x3D;&quot;黄子涵_添加&quot;&#x2F;&gt;
    &lt;item
        android:id&#x3D;&quot;@+id&#x2F;remove_item&quot;
        android:title&#x3D;&quot;黄子涵_移除&quot;&#x2F;&gt;
&lt;&#x2F;menu&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>这里我们创建了两个菜单项，其中<code>&lt;item&gt;</code>标签就是用来创建具体的某一个菜单项，然后通过<strong>android:id</strong>给这个菜单项指定一个唯一的标识符，通过<strong>android:title</strong>给这个菜单项指定一个名称。</p></blockquote><h3 id="重写onCreateOptionsMenu-方法"><a href="#重写onCreateOptionsMenu-方法" class="headerlink" title="重写onCreateOptionsMenu()方法"></a>重写<code>onCreateOptionsMenu()</code>方法</h3><blockquote><p>接着重新回到FirstActivity中来重写<code>onCreateOptionsMenu()</code>方法，重写方法可以使用Ctrl+O快捷键（Mac系统是control+O），如图（重写onCreateOptionMenu( )方法）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/重写onCreateOptionMenu( )方法.png" width="50%" height="50%"> 重写onCreateOptionMenu( )方法</center><blockquote><p>然后在onCreateOptionsMenu()方法中编写如下代码：</p></blockquote><pre class="line-numbers language-C/C++" data-language="C/C++"><code class="language-C/C++">public boolean onCreateOptionsMenu(Menu menu)
&#123;
    getMenuInflater().inflate(R.menu.main,menu);
    return true;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>通过<code>getMenuInflater()</code>方法能够得到<strong>MenuInflater</strong>对象，再调用它的<code>inflate()</code>方法就可以给当前活动创建菜单了。<code>inflate()</code>方法接收两个参数，第一个参数用于指定我们通过哪一个资源文件来创建菜单，这里当然传入R.menu.main。第二个参数用于指定我们的菜单项将添加到哪一个Menu对象当中，这里直接使用<code>onCreateOptionsMenu()</code>方法中传入的<strong>menu</strong>参数。然后给这个方法返回true，表示允许创建的菜单显示出来，如果返回了false，创建的菜单将无法显示。</p><p>当然，仅仅让菜单显示出来是不够的，我们定义菜单不仅是为了看的，关键是要菜单真正可用才行，因此还要再定义菜单响应事件。在FirstActivity中重写<code>onOptionsItemSelected()</code>方法:</p></blockquote><pre class="line-numbers language-C/C++" data-language="C/C++"><code class="language-C/C++">public boolean onOptionsItemSelected(@NonNull MenuItem item)
&#123;
    switch (item.getItemId())
    &#123;
        case R.id.add_item:
            Toast.makeText(this, &quot;你点击了黄子涵的添加&quot;, Toast.LENGTH_SHORT).show();
            break;
        case R.id.remove_item:
            Toast.makeText(this, &quot;你点击了黄子涵的移除&quot;, Toast.LENGTH_SHORT).show();
            break;
        default:
    &#125;
    return true;
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>在<code>onOptionsItemSelected()</code>方法中，通过调用<code>item.getItemId()</code>来判断我们点击的是哪一个菜单项，然后给每个菜单项加入自己的逻辑处理，这里我们就活学活用，弹出一个刚刚学会的Toast。</p><p>重新运行程序，你会发现在标题栏的右侧多了一个三点的符号，这个就是菜单按钮了，如图（带菜单按钮的活动）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/带菜单按钮的活动.jpg" width="40%" height="40%"> 带菜单按钮的活动</center><blockquote><p>可以看到，菜单里的菜单项默认是不会显示出来的，只有点击一下菜单按钮才会弹出里面具体的内容，因此它不会占用任何活动的空间，如图（）所示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/弹出菜单项的界面.jpg" width="40%" height="40%"> 弹出菜单项的界面</center><blockquote><p>然后如果你点击了Add菜单项就会弹出“你点击了黄子涵的添加”提示（如图（点击了黄子涵的添加）所示），如果点击了Remove菜单项就会弹出“你点击了黄子涵的移除”提示。</p></blockquote><center><img src="/2021/06/29/%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95/点击了黄子涵的添加.jpg" width="40%" height="40%"> 点击了黄子涵的添加</center><h2 id="销毁一个活动"><a href="#销毁一个活动" class="headerlink" title="销毁一个活动"></a>销毁一个活动</h2><blockquote><p>按一下Back键就可以销毁当前的活动了。不过如果你不想通过按 键的方式，而是希望在程序中通过代码来销毁活动，当然也可以，Activity类提供了一个<code>finish()</code>方法，我们在活动中调用一下这个方法就可以销毁当前活动了。<br>修改按钮监听器中的代码，如下所示：</p></blockquote><pre class="line-numbers language-C/C++" data-language="C/C++"><code class="language-C/C++">public void onClick(View v)
&#123;
    finish();
    &#x2F;&#x2F;Toast.makeText(FirstActivity.this, &quot;你点击了黄子涵的按钮&quot;, Toast.LENGTH_SHORT).show();
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>重新运行程序，这时点击一下按钮，当前的活动就被成功销毁了，效果和按下Back键是一样的。</p></blockquote><!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]--><audio id="audio" loop preload="auto" controls data-autoplay="true"><source type="audio/mpeg" src=""></audio><ul id="audio-list" style="display:none"><li title="0" data-url="https://link.hhtjim.com/163/4989670.mp3"></li><li title="1" data-url="https://link.hhtjim.com/163/214374.mp3"></li><li title="2" data-url="https://link.hhtjim.com/163/443794.mp3"></li><li title="3" data-url="https://link.hhtjim.com/163/28188450.mp3"></li><li title="4" data-url="https://link.hhtjim.com/163/29816860.mp3"></li><li title="5" data-url="https://link.hhtjim.com/163/4940920.mp3"></li><li title="6" data-url="https://link.hhtjim.com/163/443860.mp3"></li><li title="7" data-url="https://link.hhtjim.com/163/4940920.mp3"></li><li title="8" data-url="https://link.hhtjim.com/163/1825230064.mp3"></li><li title="9" data-url="https://link.hhtjim.com/163/27570832.mp3"></li><li title="10" data-url="https://link.hhtjim.com/163/28285777.mp3"></li><li title="11" data-url="https://link.hhtjim.com/163/68622.mp3"></li><li title="12" data-url="https://link.hhtjim.com/163/4968365.mp3"></li><li title="13" data-url="https://link.hhtjim.com/163/4968352.mp3"></li><li title="14" data-url="https://link.hhtjim.com/163/28378263.mp3"></li><li title="15" data-url="https://link.hhtjim.com/163/1461262038.mp3"></li><li title="16" data-url="https://link.hhtjim.com/163/1821680008.mp3"></li><li title="17" data-url="https://link.hhtjim.com/163/1404997257.mp3"></li></ul></div></div><div class="side"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B4%BB%E5%8A%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-number">1.</span> <span class="toc-text">活动的基本用法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%88%9B%E5%BB%BA%E6%B4%BB%E5%8A%A8"><span class="toc-number">1.1.</span> <span class="toc-text">手动创建活动</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.1.</span> <span class="toc-text">初始项目结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E6%B4%BB%E5%8A%A8%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-number">1.1.2.</span> <span class="toc-text">新建活动对话框</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8B%BE%E9%80%89Generate-Layout-File"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">勾选Generate Layout File</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8B%BE%E9%80%89Launcher-Activity"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">勾选Launcher Activity</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8B%BE%E9%80%89Backwards-Compatibility"><span class="toc-number">1.1.2.3.</span> <span class="toc-text">勾选Backwards Compatibility</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%92%8C%E5%8A%A0%E8%BD%BD%E5%B8%83%E5%B1%80"><span class="toc-number">1.2.</span> <span class="toc-text">创建和加载布局</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%B8%83%E5%B1%80%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.1.</span> <span class="toc-text">新建布局资源文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B1%80%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">1.2.2.</span> <span class="toc-text">布局编辑器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0Button%E5%85%83%E7%B4%A0"><span class="toc-number">1.2.3.</span> <span class="toc-text">添加Button元素</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#android-id"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">android:id</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#id-button"><span class="toc-number">1.2.3.2.</span> <span class="toc-text">@+id&#x2F;button</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#android-layout-width"><span class="toc-number">1.2.3.3.</span> <span class="toc-text">android:layout_width</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#android-layout-height"><span class="toc-number">1.2.3.4.</span> <span class="toc-text">android:layout_height</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#android-text"><span class="toc-number">1.2.3.5.</span> <span class="toc-text">android:text</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%84%E8%A7%88%E5%BD%93%E5%89%8D%E5%B8%83%E5%B1%80"><span class="toc-number">1.2.4.</span> <span class="toc-text">预览当前布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8%E6%B4%BB%E5%8A%A8%E4%B8%AD%E5%8A%A0%E8%BD%BD%E5%B8%83%E5%B1%80"><span class="toc-number">1.2.5.</span> <span class="toc-text">在活动中加载布局</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8AndroidManifest%E6%96%87%E4%BB%B6%E4%B8%AD%E6%B3%A8%E5%86%8C"><span class="toc-number">1.3.</span> <span class="toc-text">在AndroidManifest文件中注册</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-activity-gt-%E6%A0%87%E7%AD%BE"><span class="toc-number">1.3.1.</span> <span class="toc-text">&lt;activity&gt;标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#FirstActivity"><span class="toc-number">1.3.2.</span> <span class="toc-text">.FirstActivity</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#lt-manifest-gt-%E6%A0%87%E7%AD%BE"><span class="toc-number">1.3.3.</span> <span class="toc-text">&lt;manifest&gt;标签</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#android-label"><span class="toc-number">1.3.4.</span> <span class="toc-text">android:label</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B4%BB%E5%8A%A8%E7%9A%84%E9%A6%96%E6%AC%A1%E8%BF%90%E8%A1%8C%E7%BB%93%E6%9E%9C"><span class="toc-number">1.3.5.</span> <span class="toc-text">活动的首次运行结果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%B4%BB%E5%8A%A8%E4%B8%AD%E4%BD%BF%E7%94%A8Toast"><span class="toc-number">1.4.</span> <span class="toc-text">在活动中使用Toast</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Toast%E7%9A%84%E7%94%A8%E6%B3%95"><span class="toc-number">1.4.1.</span> <span class="toc-text">Toast的用法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#makeText-%E6%96%B9%E6%B3%95%E7%9A%843%E4%B8%AA%E5%8F%82%E6%95%B0"><span class="toc-number">1.4.2.</span> <span class="toc-text">makeText()方法的3个参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Toast%E8%BF%90%E8%A1%8C%E6%95%88%E6%9E%9C"><span class="toc-number">1.4.3.</span> <span class="toc-text">Toast运行效果</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E6%B4%BB%E5%8A%A8%E4%B8%AD%E4%BD%BF%E7%94%A8Menu"><span class="toc-number">1.5.</span> <span class="toc-text">在活动中使用Menu</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E5%BB%BAMenu%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6"><span class="toc-number">1.5.1.</span> <span class="toc-text">新建Menu资源文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E5%86%99onCreateOptionsMenu-%E6%96%B9%E6%B3%95"><span class="toc-number">1.5.2.</span> <span class="toc-text">重写onCreateOptionsMenu()方法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%94%80%E6%AF%81%E4%B8%80%E4%B8%AA%E6%B4%BB%E5%8A%A8"><span class="toc-number">1.6.</span> <span class="toc-text">销毁一个活动</span></a></li></ol></li></ol></div></div></div></div></body><script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script><script src="/js/plugin.js"></script><script src="/js/typed.js"></script><script src="/js/diaspora.js"></script><link rel="stylesheet" href="/photoswipe/photoswipe.css"><link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css"><script src="/photoswipe/photoswipe.min.js"></script><script src="/photoswipe/photoswipe-ui-default.min.js"></script><div class="pswp" tabindex="-1" role="dialog" aria-hidden="true"><div class="pswp__bg"></div><div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div><div class="pswp__item"></div><div class="pswp__item"></div></div><div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button> <button class="pswp__button pswp__button--share" title="Share"></button> <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button> <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button> <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div></html><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?6af129e1f4dfb540b30b7969d7e7fc32";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script>